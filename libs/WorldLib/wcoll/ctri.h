#pragma once
GCC_SYSTEM

#include "stdtypes.h"

typedef struct BasicTexture BasicTexture;

typedef struct CTri
{
	Vec3	V1;
	Vec2	v2;
	Vec2	v3;
	Vec2	midpt,extents;
	Vec3	norm;
	F32		scale;
	//U32		flags;
	//BasicTexture *surfTex; // wood, metal, etc.
} CTri;

typedef struct
{
	F32		inv_linemag;
	F32		linelen2;
	F32		linelen;
	U8		backside;
	U8		early_exit;
} CtriState;

// Generated by mkproto
void expandCtriVerts(const CTri *ctri,Vec3 verts[3]);
void normScaleToMat(const Vec3 n,F32 s,Mat3 m);
F32 ctriCollideRad(const CTri *tri,const Vec3 A,const Vec3 B,Vec3 col,F32 rad,CtriState *state);
F32 ctriCollide(const CTri *cfan,const Vec3 A,const Vec3 B,Vec3 col);
int createCTri(CTri *ctri,const Vec3 v0,const Vec3 v1,const Vec3 v2);
int ctriCylCheck(Vec3 orig_hit_pt,const Vec3 obj_start,const Vec3 obj_end,F32 radius,const Vec3 verts[3],F32 *sqdistp);
F32 ctriGetPointClosestToStart(Vec3 orig_hit_pt,const Vec3 obj_start,const Vec3 obj_end,F32 radius,const Vec3 verts[3],const Vec3 tri_norm,const Mat4 obj_mat);
void	allocCTri_dbg(CTri **ctriOut, const char *caller_fname, S32 line);
#define allocCTri(ctriOut) allocCTri_dbg((ctriOut) MEM_DBG_PARMS_INIT)
// End mkproto
